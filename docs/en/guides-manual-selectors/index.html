<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Creating Custom Rules without a Browser Preview · Docs Suite</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="It&#x27;s possible you&#x27;ll sometimes have to (or want to) manually create your rules, rather than by clicking through the Custom API dashboard - the preview might be imprecise and a manual target might yield better results, the [preview might be failing](error-missing-preview), or you might even be making rules programmatically and without a dashboard at all. This guide will show you how to manually target selectors."/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Creating Custom Rules without a Browser Preview · Docs Suite"/><meta property="og:type" content="website"/><meta property="og:url" content="https://diffbot.github.io/docs/"/><meta property="og:description" content="It&#x27;s possible you&#x27;ll sometimes have to (or want to) manually create your rules, rather than by clicking through the Custom API dashboard - the preview might be imprecise and a manual target might yield better results, the [preview might be failing](error-missing-preview), or you might even be making rules programmatically and without a dashboard at all. This guide will show you how to manually target selectors."/><meta property="og:image" content="https://diffbot.github.io/docs/img/diagram.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://diffbot.github.io/docs/img/diagram.svg"/><link rel="shortcut icon" href="/docs/img/diffbot-head.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://diffbot.github.io/docs/blog/atom.xml" title="Docs Suite Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://diffbot.github.io/docs/blog/feed.xml" title="Docs Suite Blog RSS Feed"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/docs/js/scrollSpy.js"></script><link rel="stylesheet" href="/docs/css/main.css"/><script src="/docs/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/docs/"><img class="logo" src="/docs/img/diffbot_white.svg" alt="Docs Suite"/><h2 class="headerTitleWithLogo">Docs Suite</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/docs/en/intro" target="_self">Prose</a></li><li class=""><a href="/docs/docs/en/api-intro" target="_self">API</a></li><li class=""><a href="/docs/docs/en/error-intro" target="_self">Debugging</a></li><li class=""><a href="/docs/help" target="_self">Help</a></li><li class=""><a href="/docs/blog/" target="_self">Blog</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>How-to Guides</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Basics<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/docs/en/intro">Introduction</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Tutorials<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/docs/en/tutorials-intro">Introduction</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">How-to Guides<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/docs/en/guides-intro">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/docs/en/guides-patterns">Crawl and Processing Patterns and Regexes</a></li><li class="navListItem"><a class="navItem" href="/docs/docs/en/guides-crawl-depth">Limiting crawl depth</a></li><li class="navListItem"><a class="navItem" href="/docs/docs/en/guides-restrict-domain">Restricting Crawls to Domains and Subdomains</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/docs/en/guides-manual-selectors">Creating Custom Rules without a Browser Preview</a></li><li class="navListItem"><a class="navItem" href="/docs/docs/en/guides-data-behind-login">Accessing Data Behind a Login Wall</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Explainers<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/docs/en/explain-intro">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/docs/en/explain-cvp">Crawling vs Processing</a></li><li class="navListItem"><a class="navItem" href="/docs/docs/en/explain-regex">Diffbot Regex Syntax</a></li><li class="navListItem"><a class="navItem" href="/docs/docs/en/explain-global-index">Global Index</a></li><li class="navListItem"><a class="navItem" href="/docs/docs/en/explain-kg">Understanding the Knowledge Graph</a></li><li class="navListItem"><a class="navItem" href="/docs/docs/en/explain-api">Understanding Extraction APIs</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/diffbot/docs/edit/master/docs/guides-manual-selectors.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Creating Custom Rules without a Browser Preview</h1></header><article><div><span><p>It's possible you'll sometimes have to (or want to) manually create your rules, rather than by clicking through the Custom API dashboard - the preview might be imprecise and a manual target might yield better results, the <a href="error-missing-preview">preview might be failing</a>, or you might even be making rules programmatically and without a dashboard at all. This guide will show you how to manually target selectors.</p>
<h2><a class="anchor" aria-hidden="true" id="example"></a><a href="#example" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h2>
<p>The page kreo.net is failing to render, as evident by the screenshot below.</p>
<p><img src="/docs/img/kreo1.png" alt="Kreo.net is failing to preview in Custom API"></p>
<p>Let’s assume we want to extract the second paragraph of the text in every Kreo blog article into a field called &quot;secondary-intro&quot;, but we cannot preview the site and click on the paragraph.</p>
<p>We open the page in a normal browser session, right click on the element we’re interested in, and click &quot;Inspect&quot;. The developer tools will open, probably targeting our desired element. If not, you can use the list of elements now opened to expand the parent elements into children and move your mouse cursor over them and find the desired element...</p>
<p><img src="/docs/img/kreo2.gif" alt="Example of manually finding the target element in a browser's inspect tool"></p>
<p>… or even click the top-most &quot;inspect element&quot; button which turns your cursor into a pointer which you can use to select elements.</p>
<p><img src="/docs/img/kreo3.gif" alt="Selecting elements using the Inspect Element pointer"></p>
<p>Once you’ve managed to target the specific element you’re looking to extract, right click on it in the element list and select <code>Copy</code> -&gt; <code>Selector</code>. Paste that selector into the custom field you’re building.</p>
<p><img src="/docs/img/kreo5.png" alt="Pasting the selector into the Custom API field"></p>
<p>Clicking save will reveal that the paragraph is now being extracted.</p>
<p><img src="/docs/img/kreo6.png" alt="The Custom API now extracts our desired element"></p>
<p>In this case, our automatically copied selector is fine but sometimes we need more precision. Don’t be afraid to experiment with selectors – nothing can go wrong, and a bit of CSS is all you need. For example, the selector that got copied for us: <code>#hs_cos_wrapper_post_body &gt; p:nth-child(3)</code> might look scary, but in reality means: &quot;in the HTML element with the ID <code>hs_cos_wrapper_post_body</code>, if there are several direct (<code>&gt;</code>) child elements of the type <code>p</code> (meaning paragraph), select the third one (<code>nth-child</code>)!&quot;</p>
<p>Note that we’re using the third one despite the paragraph being the second one because the first paragraph is occupied by the header image.</p>
</span></div></article></div><div class="docLastUpdate"><em>Last updated by Bruno Skvorc</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/docs/en/guides-restrict-domain"><span class="arrow-prev">← </span><span>Restricting Crawls to Domains and Subdomains</span></a><a class="docs-next button" href="/docs/docs/en/guides-data-behind-login"><span>Accessing Data Behind a Login Wall</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#example">Example</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/docs/" class="nav-home"><img src="/docs/img/diffbot_white.svg" alt="Docs Suite" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/docs/en/intro">Tutorials</a><a href="/docs/docs/en/guides-intro">How-to Guides</a><a href="/docs/docs/en/explain-intro">Explainers</a><a href="/docs/docs/en/api-intro">API Reference</a></div><div><h5>Community</h5><a href="https://stackoverflow.com/questions/tagged/diffbot" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://twitter.com/diffbot" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="/docs/blog">Blog</a><a href="https://github.com/diffbot">GitHub</a></div></section><a href="https://diffbot.com/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/docs/img/diffbot_white.svg" alt="Diffbot.com" width="170" height="45"/></a><section class="copyright">Copyright © 2019 Diffbot.com</section></footer></div></body></html>